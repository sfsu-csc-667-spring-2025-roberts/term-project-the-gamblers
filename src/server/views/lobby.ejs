<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('shared/head.ejs') %>
    <title>UNO Online - Lobby</title>
    <script src="/js/lobby.js" defer></script>
    <!-- <script src="/socket.io/socket.io.js" defer></script> -->
    <script src="/js/chat.js" defer></script>
    <script src="/js/onlinePlayers.js" defer></script>
    <link rel="stylesheet" href="/css/lobby.css">
    <style>
      .chat-section {
        background-color: #f1f1f1;
        border-radius: 8px;
        padding: 10px;
        margin-top: 20px;
      }

      #chat-box {
        background-color: #ffffff;
        color: #000000;
        border: 1px solid #ccc;
        border-radius: 4px;
        height: 200px;
        overflow-y: auto;
        padding: 8px;
        font-family: sans-serif;
      }

      #chat-form {
        display: flex;
        gap: 10px;
        margin-top: 10px;
      }

      #chat-message {
        flex: 1;
        padding: 6px;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      #chat-form button {
        padding: 6px 12px;
        font-size: 1rem;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      #chat-form button:hover {
        background-color: #0056b3;
      }
    </style>
</head>

<body>
  <div class="header">
    <div class="logo">UNO ONLINE</div>
    <div class="user-info">Welcome, <%= username %>
    </div>
  </div>

  <div class="container">
    <div class="sidebar">
      <div class="profile-card">
        <div class="avatar">
          <!-- You can replace this with user's avatar if available -->
          <div class="avatar-placeholder"></div>
        </div>
        <h2>
          <%= username %>
        </h2>
        <div class="stats">
          <div class="stat">
            <span class="stat-value">0</span>
            <span class="stat-label">Wins</span>
          </div>
          <div class="stat">
            <span class="stat-value">0</span>
            <span class="stat-label">Games</span>
          </div>
        </div>
      </div>

      <nav class="menu">
        <a href="#" class="active">Lobby</a>
        <a href="#">My Games</a>
        <a href="#">Leaderboard</a>
        <a href="#">Settings</a>
        <a href="/auth/logout">Logout</a>
      </nav>
    </div>

    <div class="main-content">
      <div class="section-header">
        <h1>Game Lobby</h1>
        <button class="create-game-btn" id="create-game-btn">Create New Game</button>
      </div>

      <div class="games-list">
        <div class="list-header">
          <h3>Available Games</h3>
          <div class="filter-controls">
            <select>
              <option>All Games</option>
              <option>Public Games</option>
              <option>Private Games</option>
            </select>
            <button class="refresh-btn">Refresh</button>
          </div>
        </div>

        <div class="game-cards">
          <div class="game-card">
            <div class="game-name"></div>
            <div class="game-info">
              <span class="players"></span>
              <span class="status"></span>
            </div>
            <button class="join-btn"></button>
          </div>
        </div>
      </div>

      <div class="online-players">
        <h3>Online Players</h3>
        <div class="players-count"><span id="online-count">0</span> Players Online</div>
        <div class="players-list" id="online-players-list">
        </div>
      </div>

      <!-- Chat area -->
      <div class="chat-section">
        <h3>Lobby Chat</h3>
        <div id="chat-box"></div>
        <form id="chat-form">
          <input id="chat-message" placeholder="Type your message..." />
          <button type="submit">Send</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    window.username = "<%= username %>";
  </script>
  <%- include('games/create-game-form.ejs') %>
</body>

</html>